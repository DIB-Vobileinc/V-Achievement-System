<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Handle Sign-In</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    function handleCredentialResponse(response) {
      // response.credential is the JWT
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      console.log('Signed in user:', payload);
      // payload.email is the user’s email
      // TODO: check payload.email against your managers list
      // and then redirect back to your main app page
    }

    window.onload = () => {
      google.accounts.id.initialize({
        client_id: '991409612146-u5ck34qq1kq6sekdcqnk2r32ssk8l1pf.apps.googleusercontent.com',
        callback: handleCredentialResponse,
      });
      google.accounts.id.prompt(); // show the One-Tap / popup
    };
  </script>
</head>
<body>
  <p>Signing in…</p>
</body>
</html>
